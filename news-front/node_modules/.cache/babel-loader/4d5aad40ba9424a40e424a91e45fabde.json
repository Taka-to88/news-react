{"ast":null,"code":"var _jsxFileName = \"/Users/takatokondou/react-1/wishlist-frontend/src/components/ApiFetch.js\";\nimport React, { useState, useEffect } from 'react';\nimport { withCookies } from 'react-cookie';\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios'; // export const ApiContext = createContext()\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Box from '@material-ui/core/Box';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  input: {\n    marginTop: '5%'\n  },\n  li: {\n    textAlign: 'center'\n  }\n}));\n\nconst ApiFetch = props => {\n  const classes = useStyles();\n  const token = props.cookies.get('current-token'); // console.log(token)\n\n  const [wishlists, setWish] = useState([]);\n  const [editedWish, setEditedWish] = useState({\n    id: '',\n    title: ''\n  });\n  const [amazonLink, setAmazonLink] = useState({\n    link: '',\n    item: ''\n  });\n  useEffect(() => {\n    axios.get('http://52.198.104.94/api/v1/wishlist/', {\n      headers: {\n        'Authorization': `Token ${token}`\n      }\n    }).then(res => {\n      setWish(res.data);\n    });\n  }, [token]);\n\n  const handleInputChange = () => evt => {\n    const value = evt.target.value;\n    const name = evt.target.name;\n    setEditedWish({ ...editedWish,\n      [name]: value\n    });\n  };\n\n  const newWish = wish => {\n    const data = {\n      title: wish.title\n    };\n    axios.post('http://52.198.104.94/api/v1/wishlist/', data, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}`\n      }\n    }).then(res => {\n      setWish([...wishlists, res.data]);\n      setEditedWish({\n        id: '',\n        title: ''\n      });\n    });\n  };\n\n  const deleteWish = id => {\n    axios.delete(`http://52.198.104.94/api/v1/wishlist/${id}/`, {\n      headers: {\n        'Authorization': `Token ${token}`\n      }\n    }).then(res => {\n      setWish(wishlists.filter(wish => wish.id !== id));\n    });\n  };\n\n  const editWish = wish => {\n    axios.put(`http://52.198.104.94/api/v1/wishlist/${wish.id}/`, wish, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}`\n      }\n    }).then(res => {\n      setWish(wishlists.map(wish => wish.id === editedWish.id ? res.data : wish));\n      setEditedWish({\n        id: '',\n        title: ''\n      });\n    });\n  };\n\n  const getAmazonLink = id => {\n    axios.get(`http://52.198.104.94/api/v1/link/${id}/`).then(res => {\n      setAmazonLink({\n        link: res.data.link,\n        item: res.data.itemName\n      });\n    }).catch(error => {\n      const {\n        status,\n        statusText\n      } = error.response;\n      console.log(`Error! HTTP Status: ${status} ${statusText}`);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, wishlists.map(wish => /*#__PURE__*/React.createElement(ListItem, {\n    className: \"\",\n    key: wish.id,\n    className: classes.li,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListItemText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }, wish.title)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: () => deleteWish(wish.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => setEditedWish(wish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-pen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    onClick: () => getAmazonLink(wish.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, \"Link\")))))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.input,\n    alignItems: \"center\",\n    justify: \"center\",\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    type: \"text\",\n    name: \"title\",\n    value: editedWish.title,\n    onChange: handleInputChange(),\n    placeholder: \"\\u6B32\\u3057\\u3044\\u3082\\u306E\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, editedWish.id ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    onClick: () => editWish(editedWish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, \"\\u7DE8\\u96C6\") : /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => newWish(editedWish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, \"\\u8FFD\\u52A0\"))), amazonLink.link ? /*#__PURE__*/React.createElement(Link, {\n    className: classes.input,\n    href: amazonLink.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, amazonLink.item, \"\\u306EAmazon\\u30EA\\u30F3\\u30AF\") : /*#__PURE__*/React.createElement(React.Fragment, null));\n};\n\nexport default withCookies(ApiFetch);","map":{"version":3,"sources":["/Users/takatokondou/react-1/wishlist-frontend/src/components/ApiFetch.js"],"names":["React","useState","useEffect","withCookies","makeStyles","axios","List","ListItem","ListItemText","Box","Container","Button","Grid","DeleteIcon","IconButton","TextField","Link","useStyles","theme","root","width","maxWidth","backgroundColor","palette","background","paper","input","marginTop","li","textAlign","ApiFetch","props","classes","token","cookies","get","wishlists","setWish","editedWish","setEditedWish","id","title","amazonLink","setAmazonLink","link","item","headers","then","res","data","handleInputChange","evt","value","target","name","newWish","wish","post","deleteWish","delete","filter","editWish","put","map","getAmazonLink","itemName","catch","error","status","statusText","response","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect} from 'react'\nimport { withCookies } from 'react-cookie'\nimport { makeStyles } from '@material-ui/core/styles';\nimport axios from 'axios'\n// export const ApiContext = createContext()\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Box from '@material-ui/core/Box';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button'\nimport Grid from '@material-ui/core/Grid'\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  input: {\n    marginTop: '5%',\n  },\n  li: {\n    textAlign: 'center',\n  }\n}));\n\nconst ApiFetch = (props) => {\n  const classes = useStyles();\n\n  const token = props.cookies.get('current-token')\n  // console.log(token)\n  const [wishlists, setWish] = useState([])\n  const [editedWish, setEditedWish] = useState({id:'', title:''})\n  const [amazonLink, setAmazonLink] = useState({link:'', item:''})\n\n  useEffect(() => {\n    axios.get('http://52.198.104.94/api/v1/wishlist/', {\n      headers: {\n        'Authorization': `Token ${token}`\n      }\n    })\n    .then(res => {setWish(res.data)})\n  },[token])\n\n  const handleInputChange = () => evt => {\n    const value = evt.target.value;\n    const name = evt.target.name;\n    setEditedWish({...editedWish, [name]:value})\n  }\n\n  const newWish = (wish) => {\n\n    const data = {\n      title: wish.title\n    }\n    axios.post('http://52.198.104.94/api/v1/wishlist/', data,{\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}`\n      }\n    })\n    .then(res => {setWish([...wishlists, res.data]); setEditedWish({id:'',title:''})})\n  }\n\n\n\n\n  const deleteWish = (id) => {\n    axios.delete(`http://52.198.104.94/api/v1/wishlist/${id}/`,{\n      headers: {\n        'Authorization': `Token ${token}`\n      }\n    })\n    .then(res => {setWish(wishlists.filter(wish => wish.id !== id));})\n  }\n\n  const editWish = (wish) => {\n\n    axios.put(`http://52.198.104.94/api/v1/wishlist/${wish.id}/`, wish,{\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Token ${token}`\n      }\n    })\n    .then(res => {setWish(wishlists.map(wish => (wish.id === editedWish.id ? res.data :wish)));\n      setEditedWish({id:'',title:''})\n\n    })\n  }\n\n\n  const getAmazonLink = (id) => {\n    axios.get(`http://52.198.104.94/api/v1/link/${id}/`)\n    .then(res => {setAmazonLink({link:res.data.link,item:res.data.itemName})})\n    .catch(error => {\n      const {\n        status,\n        statusText\n      } = error.response;\n      console.log(`Error! HTTP Status: ${status} ${statusText}`);\n    });\n  }\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"center\">\n      <Grid container alignItems=\"center\" justify=\"center\">\n        <List>\n        {\n          wishlists.map(wish =>\n          <ListItem className=\"\" key={wish.id} className={classes.li}>\n            <ListItemText>\n              <Grid container spacing={6}>\n                <Grid item xs={6}>\n                  <h2>{wish.title}</h2>\n                </Grid>\n                <Grid item xs={2}>\n                  <Button size=\"large\"  variant=\"contained\" color=\"secondary\" onClick={()=>deleteWish(wish.id)} >\n                    <i className=\"fas fa-trash-alt\"></i>\n                  </Button>\n                </Grid>\n                <Grid item xs={2}>\n                  <Button size=\"large\" variant=\"contained\" color=\"primary\" onClick={()=>setEditedWish(wish)}>\n                    <i className=\"fas fa-pen\"></i>\n                  </Button>\n                </Grid>\n                <Grid item xs={2}>\n                  <Button size=\"large\" variant=\"contained\" onClick={()=>getAmazonLink(wish.id)}>\n                    Link\n                  </Button>\n                </Grid>\n              </Grid>\n            </ListItemText>\n          </ListItem>)\n        }\n        </List>\n      </Grid>\n\n      <Grid container className={classes.input} alignItems=\"center\" justify=\"center\" spacing={2}>\n        <Grid item >\n        <TextField id=\"outlined-basic\" variant=\"outlined\" type='text' name='title'\n          value = {editedWish.title}\n          onChange={handleInputChange()}\n          placeholder=\"欲しいもの\" required />\n        </Grid>\n        <Grid item >\n          { editedWish.id ?\n        <Button variant=\"outlined\" color=\"secondary\" onClick={()=>editWish(editedWish)} >編集</Button> :\n        <Button variant=\"outlined\" color=\"primary\" onClick={()=>newWish(editedWish)} >追加</Button> }\n       </Grid>\n      </Grid>\n\n       { amazonLink.link ?\n        <Link className={classes.input} href={ amazonLink.link } >{ amazonLink.item }のAmazonリンク</Link>:\n        <></>\n       }\n       </Grid>\n\n\n\n  )\n}\n\nexport default withCookies(ApiFetch)\n"]},"metadata":{},"sourceType":"module"}