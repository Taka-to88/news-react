{"ast":null,"code":"var _jsxFileName = \"/Users/takatokondou/react-1/wishlist-frontend/src/components/Login.js\";\nimport React, { useReducer } from 'react';\nimport { withCookies } from 'react-cookie';\nimport axios from 'axios';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { START_FETCH, FETCH_SUCCESS, ERROR_CATCHED, INPUT_EDIT, TOGGLE_MODE } from './actionTypes';\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  span: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    color: 'teal'\n  },\n  spanError: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    color: 'fuchsia',\n    marginTop: 10\n  }\n}));\nconst initialState = {\n  isLoading: false,\n  isLoginView: true,\n  error: '',\n  credentialsLog: {\n    username: '',\n    password: ''\n  },\n  credentialsReg: {\n    email: '',\n    password: ''\n  }\n};\n\nconst loginReducer = (state, action) => {\n  switch (action.type) {\n    case START_FETCH:\n      {\n        return { ...state,\n          isLoading: true\n        };\n      }\n\n    case FETCH_SUCCESS:\n      {\n        return { ...state,\n          isLoading: false\n        };\n      }\n\n    case ERROR_CATCHED:\n      {\n        return { ...state,\n          error: 'Email or password is not correct!',\n          isLoading: false\n        };\n      }\n\n    case INPUT_EDIT:\n      {\n        return { ...state,\n          [action.inputName]: action.payload,\n          error: ''\n        };\n      }\n\n    case TOGGLE_MODE:\n      {\n        return { ...state,\n          isLoginView: !state.isLoginView\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nconst Login = props => {\n  const classes = useStyles();\n  const [state, dispatch] = useReducer(loginReducer, initialState);\n\n  const inputChangedLog = () => event => {\n    const cred = state.credentialsLog;\n    cred[event.target.name] = event.target.value;\n    dispatch({\n      type: INPUT_EDIT,\n      inputName: 'state.credentialLog',\n      payload: cred\n    });\n  };\n\n  const inputChangedReg = () => event => {\n    const cred = state.credentialsReg;\n    cred[event.target.name] = event.target.value;\n    dispatch({\n      type: INPUT_EDIT,\n      inputName: 'state.credentialReg',\n      payload: cred\n    });\n  };\n\n  const login = async event => {\n    event.preventDefault();\n\n    if (state.isLoginView) {\n      try {\n        dispatch({\n          type: START_FETCH\n        });\n        const res = await axios.post('http://52.198.104.94/authen/', state.credentialsLog, {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        props.cookies.set('current-token', res.data.token);\n        res.data.token ? window.location.href = \"/wishlists\" : window.location.href = \"/\";\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n      } catch {\n        dispatch({\n          type: ERROR_CATCHED\n        });\n      }\n    } else {\n      try {\n        dispatch({\n          type: START_FETCH\n        });\n        await axios.post('http://52.198.104.94/api/v1/user/create/', state.credentialsReg, {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        dispatch({\n          type: FETCH_SUCCESS\n        });\n        dispatch({\n          type: TOGGLE_MODE\n        });\n      } catch {\n        dispatch({\n          type: ERROR_CATCHED\n        });\n      }\n    }\n  };\n\n  const toggleView = () => {\n    dispatch({\n      type: TOGGLE_MODE\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, state.isLoading && /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, state.isLoginView ? 'Login' : 'Register'), state.isLoginView ? /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"Email\",\n    name: \"username\",\n    value: state.credentialsLog.username,\n    onChange: inputChangedLog(),\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"Email\",\n    name: \"email\",\n    value: state.credentialsReg.email,\n    onChange: inputChangedReg(),\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }), state.isLoginView ? /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    value: state.credentialsLog.password,\n    onChange: inputChangedLog(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  }) : /*#__PURE__*/React.createElement(TextField, {\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    value: state.credentialsReg.password,\n    onChange: inputChangedReg(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.spanError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, state.error), state.isLoginView ? !state.credentialsLog.password || !state.credentialsLog.username ? /*#__PURE__*/React.createElement(Button, {\n    className: classes.submit,\n    type: \"submit\",\n    fullWidth: true,\n    disabled: true,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, \"Login\") : /*#__PURE__*/React.createElement(Button, {\n    className: classes.submit,\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, \"Login\") : !state.credentialsReg.password || !state.credentialsReg.email ? /*#__PURE__*/React.createElement(Button, {\n    className: classes.submit,\n    type: \"submit\",\n    fullWidth: true,\n    disabled: true,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  }, \"Register\") : /*#__PURE__*/React.createElement(Button, {\n    className: classes.submit,\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => toggleView(),\n    className: classes.span,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, state.isLoginView ? 'Create Accout ?' : 'Back to login ?'))));\n};\n\nexport default withCookies(Login);","map":{"version":3,"sources":["/Users/takatokondou/react-1/wishlist-frontend/src/components/Login.js"],"names":["React","useReducer","withCookies","axios","Avatar","Button","TextField","LockOutlinedIcon","Typography","makeStyles","Container","CircularProgress","START_FETCH","FETCH_SUCCESS","ERROR_CATCHED","INPUT_EDIT","TOGGLE_MODE","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","span","color","spanError","initialState","isLoading","isLoginView","error","credentialsLog","username","password","credentialsReg","email","loginReducer","state","action","type","inputName","payload","Login","props","classes","dispatch","inputChangedLog","event","cred","target","name","value","inputChangedReg","login","preventDefault","res","post","headers","cookies","set","data","token","window","location","href","toggleView"],"mappings":"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","sourcesContent":["import React, {useReducer} from 'react';\nimport { withCookies } from 'react-cookie';\nimport axios from 'axios';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport {START_FETCH, FETCH_SUCCESS, ERROR_CATCHED, INPUT_EDIT, TOGGLE_MODE} from './actionTypes';\n\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n      width: '100%', // Fix IE 11 issue.\n      marginTop: theme.spacing(1),\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2),\n    },\n    span: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      color: 'teal',\n    },\n    spanError: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        color: 'fuchsia',\n        marginTop: 10,\n      },\n  }));\n\n\n\nconst initialState = {\n  isLoading: false,\n  isLoginView: true,\n  error: '',\n  credentialsLog: {\n    username: '',\n    password: ''\n  },\n  credentialsReg: {\n    email: '',\n    password: ''\n  }\n};\n\nconst loginReducer = (state, action) => {\n  switch (action.type) {\n    case START_FETCH: {\n      return {\n        ...state,\n        isLoading: true,\n      }\n    }\n    case FETCH_SUCCESS: {\n      return {\n        ...state,\n        isLoading: false\n      }\n    }\n    case ERROR_CATCHED: {\n      return {\n        ...state,\n        error: 'Email or password is not correct!',\n        isLoading: false\n      }\n    }\n    case INPUT_EDIT: {\n      return {\n        ...state,\n        [action.inputName]: action.payload,\n        error: '',\n      }\n    }\n    case TOGGLE_MODE: {\n      return {\n        ...state,\n        isLoginView: !state.isLoginView,\n      }\n    }\n    default:\n      return state;\n  }\n}\n\nconst Login = (props) => {\n    const classes = useStyles();\n    const [state, dispatch] = useReducer(loginReducer, initialState);\n\n    const inputChangedLog = () => event => {\n      const cred = state.credentialsLog;\n      cred[event.target.name] = event.target.value;\n      dispatch({\n        type: INPUT_EDIT,\n        inputName: 'state.credentialLog',\n        payload: cred,\n      })\n    }\n\n    const inputChangedReg = () => event => {\n      const cred = state.credentialsReg;\n      cred[event.target.name] = event.target.value;\n      dispatch({\n        type: INPUT_EDIT,\n        inputName: 'state.credentialReg',\n        payload: cred,\n      })\n    }\n\n    const login = async(event) => {\n      event.preventDefault()\n      if(state.isLoginView) {\n        try {\n          dispatch({type: START_FETCH})\n          const res = await axios.post('http://52.198.104.94/authen/', state.credentialsLog, {\n          headers: {'Content-Type': 'application/json'}})\n          props.cookies.set('current-token', res.data.token)\n          res.data.token ? window.location.href = \"/wishlists\" : window.location.href = \"/\"\n          dispatch({type: FETCH_SUCCESS})\n        } catch {\n          dispatch({type: ERROR_CATCHED})\n        }\n      } else {\n        try {\n          dispatch({type: START_FETCH})\n          await axios.post('http://52.198.104.94/api/v1/user/create/', state.credentialsReg, {\n          headers: {'Content-Type': 'application/json'}})\n          dispatch({type: FETCH_SUCCESS})\n          dispatch({type: TOGGLE_MODE})\n        } catch {\n          dispatch({type: ERROR_CATCHED})\n        }\n      }\n    }\n\n    const toggleView = () => {\n      dispatch({type: TOGGLE_MODE})\n    }\n\n    return (\n       <Container maxWidth=\"xs\">\n         <form onSubmit={login}>\n          <div className={classes.paper}>\n            {state.isLoading && <CircularProgress />}\n            <Avatar className={classes.avatar}>\n              <LockOutlinedIcon/>\n            </Avatar>\n            <Typography variant=\"h5\">\n              {state.isLoginView ? 'Login' : 'Register'}\n            </Typography>\n\n            { state.isLoginView ?\n              <TextField\n                variant=\"outlined\" margin=\"normal\"\n                fullWidth label=\"Email\"\n                name=\"username\"\n                value={state.credentialsLog.username}\n                onChange={inputChangedLog()}\n                autoFocus/> :\n              <TextField\n                variant=\"outlined\" margin=\"normal\"\n                fullWidth label=\"Email\"\n                name=\"email\"\n                value={state.credentialsReg.email}\n                onChange={inputChangedReg()}\n                autoFocus/>\n            }\n\n            { state.isLoginView ?\n              <TextField\n                variant=\"outlined\" margin=\"normal\"\n                fullWidth label=\"Password\"\n                name=\"password\"\n                type=\"password\"\n                value={state.credentialsLog.password}\n                onChange={inputChangedLog()}/> :\n              <TextField\n                variant=\"outlined\" margin=\"normal\"\n                fullWidth label=\"Password\"\n                name=\"password\"\n                type=\"password\"\n                value={state.credentialsReg.password}\n                onChange={inputChangedReg()}/>\n            }\n            <span className={classes.spanError}>{state.error}</span>\n\n            { state.isLoginView ?\n              !state.credentialsLog.password || !state.credentialsLog.username ?\n              <Button className={classes.submit} type=\"submit\" fullWidth disabled variant=\"contained\" color=\"primary\">Login</Button>\n              : <Button className={classes.submit} type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">Login</Button>\n            :\n              !state.credentialsReg.password || !state.credentialsReg.email ?\n              <Button className={classes.submit} type=\"submit\" fullWidth disabled variant=\"contained\" color=\"primary\">Register</Button>\n              : <Button className={classes.submit} type=\"submit\" fullWidth variant=\"contained\" color=\"primary\">Register</Button>\n            }\n\n            <span onClick={()=>toggleView()} className={classes.span}>\n              {state.isLoginView ? 'Create Accout ?' : 'Back to login ?'}\n            </span>\n\n\n          </div>\n\n         </form>\n       </Container>\n    )\n}\n\nexport default withCookies(Login)\n"]},"metadata":{},"sourceType":"module"}