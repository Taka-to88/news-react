{"ast":null,"code":"var _jsxFileName = \"/Users/takatokondou/react-1/wishlist-frontend/src/components/ApiFetch.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\"; // export const ApiContext = createContext()\n\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Link from \"@material-ui/core/Link\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper\n  },\n  input: {\n    marginTop: \"5%\"\n  },\n  li: {\n    textAlign: \"center\"\n  }\n}));\n\nconst ApiFetch = props => {\n  const classes = useStyles();\n  const token = props.cookies.get(\"current-token\"); // console.log(token)\n\n  const [wishlists, setWish] = useState([]);\n  const [editedWish, setEditedWish] = useState({\n    id: \"\",\n    title: \"\"\n  });\n  const [amazonLink, setAmazonLink] = useState({\n    link: \"\",\n    item: \"\"\n  });\n  useEffect(() => {\n    axios.get(\"http://52.198.104.94/api/v1/wishlist/\", {\n      headers: {\n        Authorization: `Token ${token}`\n      }\n    }).then(res => {\n      setWish(res.data);\n    });\n  }, [token]);\n\n  const handleInputChange = () => evt => {\n    const value = evt.target.value;\n    const name = evt.target.name;\n    setEditedWish({ ...editedWish,\n      [name]: value\n    });\n  };\n\n  const newWish = wish => {\n    const data = {\n      title: wish.title\n    };\n    axios.post(\"http://52.198.104.94/api/v1/wishlist/\", data, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${token}`\n      }\n    }).then(res => {\n      setWish([...wishlists, res.data]);\n      setEditedWish({\n        id: \"\",\n        title: \"\"\n      });\n    });\n  };\n\n  const deleteWish = id => {\n    axios.delete(`http://52.198.104.94/api/v1/wishlist/${id}/`, {\n      headers: {\n        Authorization: `Token ${token}`\n      }\n    }).then(res => {\n      setWish(wishlists.filter(wish => wish.id !== id));\n    });\n  };\n\n  const editWish = wish => {\n    axios.put(`http://52.198.104.94/api/v1/wishlist/${wish.id}/`, wish, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Token ${token}`\n      }\n    }).then(res => {\n      setWish(wishlists.map(wish => wish.id === editedWish.id ? res.data : wish));\n      setEditedWish({\n        id: \"\",\n        title: \"\"\n      });\n    });\n  };\n\n  const getAmazonLink = id => {\n    axios.get(`http://52.198.104.94/api/v1/link/${id}/`).then(res => {\n      setAmazonLink({\n        link: res.data.link,\n        item: res.data.itemName\n      });\n    }).catch(error => {\n      const {\n        status,\n        statusText\n      } = error.response;\n      console.log(`Error! HTTP Status: ${status} ${statusText}`);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    alignItems: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, wishlists.map(wish => /*#__PURE__*/React.createElement(ListItem, {\n    className: \"\",\n    key: wish.id,\n    className: classes.li,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ListItemText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, wish.title)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: () => deleteWish(wish.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => setEditedWish(wish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-pen\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    onClick: () => getAmazonLink(wish.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, \"Link\")))))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    className: classes.input,\n    alignItems: \"center\",\n    justify: \"center\",\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    variant: \"outlined\",\n    type: \"text\",\n    name: \"title\",\n    value: editedWish.title,\n    onChange: handleInputChange(),\n    placeholder: \"\\u6B32\\u3057\\u3044\\u3082\\u306E\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }, editedWish.id ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"secondary\",\n    onClick: () => editWish(editedWish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 13\n    }\n  }, \"\\u7DE8\\u96C6\") : /*#__PURE__*/React.createElement(Button, {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: () => newWish(editedWish),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  }, \"\\u8FFD\\u52A0\"))), amazonLink.link ? /*#__PURE__*/React.createElement(Link, {\n    className: classes.input,\n    href: amazonLink.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, amazonLink.item, \"\\u306EAmazon\\u30EA\\u30F3\\u30AF\") : /*#__PURE__*/React.createElement(React.Fragment, null));\n};\n\nexport default withCookies(ApiFetch);","map":{"version":3,"sources":["/Users/takatokondou/react-1/wishlist-frontend/src/components/ApiFetch.js"],"names":["React","useState","useEffect","withCookies","makeStyles","axios","List","ListItem","ListItemText","Box","Container","Button","Grid","DeleteIcon","IconButton","TextField","Link","useStyles","theme","root","width","maxWidth","backgroundColor","palette","background","paper","input","marginTop","li","textAlign","ApiFetch","props","classes","token","cookies","get","wishlists","setWish","editedWish","setEditedWish","id","title","amazonLink","setAmazonLink","link","item","headers","Authorization","then","res","data","handleInputChange","evt","value","target","name","newWish","wish","post","deleteWish","delete","filter","editWish","put","map","getAmazonLink","itemName","catch","error","status","statusText","response","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { withCookies } from \"react-cookie\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\n// export const ApiContext = createContext()\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Link from \"@material-ui/core/Link\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  input: {\n    marginTop: \"5%\",\n  },\n  li: {\n    textAlign: \"center\",\n  },\n}));\n\nconst ApiFetch = (props) => {\n  const classes = useStyles();\n\n  const token = props.cookies.get(\"current-token\");\n  // console.log(token)\n  const [wishlists, setWish] = useState([]);\n  const [editedWish, setEditedWish] = useState({ id: \"\", title: \"\" });\n  const [amazonLink, setAmazonLink] = useState({ link: \"\", item: \"\" });\n\n  useEffect(() => {\n    axios\n      .get(\"http://52.198.104.94/api/v1/wishlist/\", {\n        headers: {\n          Authorization: `Token ${token}`,\n        },\n      })\n      .then((res) => {\n        setWish(res.data);\n      });\n  }, [token]);\n\n  const handleInputChange = () => (evt) => {\n    const value = evt.target.value;\n    const name = evt.target.name;\n    setEditedWish({ ...editedWish, [name]: value });\n  };\n\n  const newWish = (wish) => {\n    const data = {\n      title: wish.title,\n    };\n    axios\n      .post(\"http://52.198.104.94/api/v1/wishlist/\", data, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${token}`,\n        },\n      })\n      .then((res) => {\n        setWish([...wishlists, res.data]);\n        setEditedWish({ id: \"\", title: \"\" });\n      });\n  };\n\n  const deleteWish = (id) => {\n    axios\n      .delete(`http://52.198.104.94/api/v1/wishlist/${id}/`, {\n        headers: {\n          Authorization: `Token ${token}`,\n        },\n      })\n      .then((res) => {\n        setWish(wishlists.filter((wish) => wish.id !== id));\n      });\n  };\n\n  const editWish = (wish) => {\n    axios\n      .put(`http://52.198.104.94/api/v1/wishlist/${wish.id}/`, wish, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${token}`,\n        },\n      })\n      .then((res) => {\n        setWish(\n          wishlists.map((wish) => (wish.id === editedWish.id ? res.data : wish))\n        );\n        setEditedWish({ id: \"\", title: \"\" });\n      });\n  };\n\n  const getAmazonLink = (id) => {\n    axios\n      .get(`http://52.198.104.94/api/v1/link/${id}/`)\n      .then((res) => {\n        setAmazonLink({ link: res.data.link, item: res.data.itemName });\n      })\n      .catch((error) => {\n        const { status, statusText } = error.response;\n        console.log(`Error! HTTP Status: ${status} ${statusText}`);\n      });\n  };\n\n  return (\n    <Grid container alignItems=\"center\" justify=\"center\">\n      <Grid container alignItems=\"center\" justify=\"center\">\n        <List>\n          {wishlists.map((wish) => (\n            <ListItem className=\"\" key={wish.id} className={classes.li}>\n              <ListItemText>\n                <Grid container spacing={6}>\n                  <Grid item xs={6}>\n                    <h2>{wish.title}</h2>\n                  </Grid>\n                  <Grid item xs={2}>\n                    <Button\n                      size=\"large\"\n                      variant=\"contained\"\n                      color=\"secondary\"\n                      onClick={() => deleteWish(wish.id)}\n                    >\n                      <i className=\"fas fa-trash-alt\"></i>\n                    </Button>\n                  </Grid>\n                  <Grid item xs={2}>\n                    <Button\n                      size=\"large\"\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => setEditedWish(wish)}\n                    >\n                      <i className=\"fas fa-pen\"></i>\n                    </Button>\n                  </Grid>\n                  <Grid item xs={2}>\n                    <Button\n                      size=\"large\"\n                      variant=\"contained\"\n                      onClick={() => getAmazonLink(wish.id)}\n                    >\n                      Link\n                    </Button>\n                  </Grid>\n                </Grid>\n              </ListItemText>\n            </ListItem>\n          ))}\n        </List>\n      </Grid>\n\n      <Grid\n        container\n        className={classes.input}\n        alignItems=\"center\"\n        justify=\"center\"\n        spacing={2}\n      >\n        <Grid item>\n          <TextField\n            id=\"outlined-basic\"\n            variant=\"outlined\"\n            type=\"text\"\n            name=\"title\"\n            value={editedWish.title}\n            onChange={handleInputChange()}\n            placeholder=\"欲しいもの\"\n            required\n          />\n        </Grid>\n        <Grid item>\n          {editedWish.id ? (\n            <Button\n              variant=\"outlined\"\n              color=\"secondary\"\n              onClick={() => editWish(editedWish)}\n            >\n              編集\n            </Button>\n          ) : (\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => newWish(editedWish)}\n            >\n              追加\n            </Button>\n          )}\n        </Grid>\n      </Grid>\n\n      {amazonLink.link ? (\n        <Link className={classes.input} href={amazonLink.link}>\n          {amazonLink.item}のAmazonリンク\n        </Link>\n      ) : (\n        <></>\n      )}\n    </Grid>\n  );\n};\n\nexport default withCookies(ApiFetch);\n"]},"metadata":{},"sourceType":"module"}